<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>rCharts, dimple, and time series</title>
  <!-- Always force latest IE rendering engine -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="Timely Portfolio">
  
  <link rel="icon" type="image/png" href="img/slidify_logo_notext.png">
  
  <link href="libraries/frameworks/bootplus/assets/css/bootplus.css" rel="stylesheet">
  <link href="libraries/frameworks/bootplus/assets/css/bootplus-responsive.css" rel="stylesheet">
  <link href="libraries/frameworks/bootplus/assets/css/font-awesome.min.css" rel="stylesheet">
  <link href="libraries/frameworks/bootplus/assets/css/docs.css" rel="stylesheet">
  <link href="libraries/highlighters/prettify/css/twitter-bootstrap.css" rel="stylesheet">
  
  <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,700' rel='stylesheet' type='text/css'>
  
  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
  <script src="../assets/js/html5shiv.js"></script>
  <![endif]-->
  
  
  <style>
    p {
      text-align: justify;
    }
    .nav [class^="icon-"] {
      line-height: normal;
    }
    
    ol.linenums {
      
    }
  </style>
  
  <!-- Fav and touch icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="libraries/frameworks/bootplus/assets/ico/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="libraries/frameworks/bootplus/assets/ico/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="libraries/frameworks/bootplus/assets/ico/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="libraries/frameworks/bootplus/assets/ico/apple-touch-icon-57-precomposed.png">
  <link rel="shortcut icon" href="libraries/frameworks/bootplus/assets/ico/favicon.png">  
  <script src="libraries/frameworks/bootplus/assets/js/jquery.js"></script>
  <script src="libraries/widgets/dimple/js/dimple.v1.js"></script>
<script src="libraries/widgets/dimple/js/d3.v3.js"></script>
<script src="libraries/widgets/dimple/js/queue.js"></script>

</head>
<body data-spy="scroll" data-target=".bs-docs-sidebar">
  
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand" href="http://aozora.github.io/bootplus/" style= "color:gray;">
              <!-- <img src='assets/img/slidify_logo.png' width='100px' /> -->
              {powered by Bootplus}
            </a>

            <iframe class="pull-right" style="margin-top:10px;" src="http://ghbtns.com/github-btn.html?user=timelyportfolio&repo=rCharts_dimple&type=fork&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="95px" height="20px"></iframe>
            <iframe class="pull-right" style="margin-top:10px;" src="http://ghbtns.com/github-btn.html?user=timelyportfolio&repo=rCharts_dimple&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="95px" height="20px"></iframe>
            <div class="nav-collapse collapse">
                <ul class="nav">
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </div>
</div>
  <header class="jumbotron subhead" id="overview">
    <div class="container">
      <h1>rCharts, dimple, and time series</h1>
      <p class="lead">
        dimplejs and rCharts Tutorial with US Treasury Yield Data
      </p>
    </div>
  </header>
  
  <div class="container">
  <div class="row">
    <div class="span3 bs-docs-sidebar">
      <ul class="nav nav-list bs-docs-sidenav">
        <li><a href="#slide-1"> rCharts Smiles With dimple</a></li>
        <li><a href="#slide-2"> Get the Data</a></li>
        <li><a href="#slide-3"> Transform Our Data</a></li>
        <li><a href="#slide-4"> Our First Plot - A Single Line</a></li>
        <li><a href="#slide-5"> Fix the x axis</a></li>
        <li><a href="#slide-6"> Line Chart with all Maturities</a></li>
        <li><a href="#slide-7"> Line Chart by Maturity by Date</a></li>
        <li><a href="#slide-8"> Yield Curve Storyboard</a></li>
        <li><a href="#slide-9"> Other dimplejs Chart Types</a></li>
        <li><a href="#slide-10"> More rCharts, slidify, and dimplejs</a></li>
        <li><a href="#slide-11"> Thanks</a></li>
      </ul>
    </div>
    
    <div class="span8">
      <section id="slide-1">
  <div class="page-header">
    <h1>rCharts Smiles With dimple</h1>
  </div>
  <style>
/*
path.line {
  fill: none;
  stroke: #666;
  stroke-width: 1.5px;
}
*/
.axis {
  shape-rendering: crispEdges;
}

.axis text {
  font: 10px sans-serif;
  margin: 0;
}

.x.axis line {
  stroke: #000;
}

.x.axis path {
  display: none;
}
</style>

<p>Even this early in it release, <a href="http://dimplejs.org">dimplejs</a> is such a powerful and promising <a href="http://d3js.org">d3</a> library that we decided to quickly make it available in <a href="http://rcharts.io/site">rCharts</a>.  The first test was to recreate all (48) of the examples provided by <a href="http://dimplejs.org/examples_index.html">dimplejs</a> with <code>rCharts</code>.  Once we <a href="http://timelyportfolio.github.io/rCharts_dimple/gallery/">completed those</a>, we felt fairly satisfied that we had good coverage of the <code>dimplejs</code> API (easily one of the best <a href="https://github.com/PMSI-AlignAlytics/dimple/wiki">documented</a>).  We are aware of a couple missing items, but I really wanted to throw some real financial time series at it to see how well it might work in my real life as a portfolio manager.  If you are not familiar with <code>rCharts</code>, you might want to see this <a href="http://ramnathv.github.io/rCharts/">Quickstart</a>.</p>

</section>
<section id="slide-2">
  <div class="page-header">
    <h1>Get the Data</h1>
  </div>
  <p>Since bonds are a hot topic now, I thought some US Treasury Yield data from the St. Louis Federal Reserve (FRED) would make a nice subject.  I will start very basic and build up to a still simple but slightly more complicated plot.  As always, we first need data so we grab the data with <code>quantmod</code> <code>getSymbols()</code> and then merge it into one big <code>ust.xts</code> object.</p>

<pre><code class="r">require(quantmod)
require(rCharts)
#now get the US bonds from FRED
USbondssymbols &lt;- paste0(&quot;DGS&quot;,c(1,2,3,5,7,10,20,30))

ust.xts &lt;- xts()
for (i in 1:length( USbondssymbols ) ) {
  ust.xts &lt;- merge( 
    ust.xts,
    getSymbols( 
      USbondssymbols[i], auto.assign = FALSE,src = &quot;FRED&quot;
    )
  )
}
</code></pre>

</section>
<section id="slide-3">
  <div class="page-header">
    <h1>Transform Our Data</h1>
  </div>
  <p>Then we will define a little <code>xtsMelt</code> function to easily transform our wide <code>xts</code> data into long form.</p>

<pre><code class="r">xtsMelt &lt;- function(data) {
  require(reshape2)

  #translate xts to time series to json with date and data
  #for this behavior will be more generic than the original
  #data will not be transformed, so template.rmd will be changed to reflect


  #convert to data frame
  data.df &lt;- data.frame(cbind(format(index(data),&quot;%Y-%m-%d&quot;),coredata(data)))
  colnames(data.df)[1] = &quot;date&quot;
  data.melt &lt;- melt(data.df,id.vars=1,stringsAsFactors=FALSE)
  colnames(data.melt) &lt;- c(&quot;date&quot;,&quot;indexname&quot;,&quot;value&quot;)
  #remove periods from indexnames to prevent javascript confusion
  #these . usually come from spaces in the colnames when melted
  data.melt[,&quot;indexname&quot;] &lt;- apply(matrix(data.melt[,&quot;indexname&quot;]),2,gsub,pattern=&quot;[.]&quot;,replacement=&quot;&quot;)
  return(data.melt)
  #return(df2json(na.omit(data.melt)))
}
</code></pre>

<p>Now let&#39;s use our new <code>xtsMelt</code> function on our data.  You might notice that we use <code>na.omit</code> to remove the pesky NAs that sometimes haunt FRED data.</p>

<pre><code class="r">ust.melt &lt;- na.omit( xtsMelt( ust.xts[&quot;2012::&quot;,] ) )

ust.melt$date &lt;- format(as.Date(ust.melt$date))
ust.melt$value &lt;- as.numeric(ust.melt$value)
ust.melt$indexname &lt;- factor(
  ust.melt$indexname, levels = colnames(ust.xts)
)
ust.melt$maturity &lt;- as.numeric(
  substr(
    ust.melt$indexname, 4, length( ust.melt$indexname ) - 4
  )
)
ust.melt$country &lt;- rep( &quot;US&quot;, nrow( ust.melt ))
</code></pre>

</section>
<section id="slide-4">
  <div class="page-header">
    <h1>Our First Plot - A Single Line</h1>
  </div>
  <p>Getting the data was fairly easy, now let&#39;s plot.  I hope you see how easy it is to get an interactive <code>dimplejs</code> chart from <code>R</code>.  Without my comments, the code would all fit nicely on one line.  We can even use a <code>r</code> formula to define our <code>x</code> and <code>y</code> as shown <code>value~date</code>.</p>

<pre><code class="r">#simple line chart of 10 year
d1 &lt;- dPlot(
  value ~ date,  #or x=&quot;date&quot;, y=&quot;value&quot;
  #dimplejs allows filtering but will lessen data to write
  #if we subset in R
  data = subset(ust.melt,maturity==10),  #get all data for 10y maturity
  type = &#39;line&#39;
)
d1
</code></pre>


<div id='chart1' class='rChart dimple'></div>

</section>
<section id="slide-5">
  <div class="page-header">
    <h1>Fix the x axis</h1>
  </div>
  <p>Uh oh, our x axis does not look too pretty.  However, <code>rCharts</code> is extensible and modular, so let&#39;s quickly jump to a little more advanced concept.  Currently <code>dimplejs</code> does not support dates on the x axis as well as I would like.  <code>dimplejs</code> is built on <code>d3</code>, so let&#39;s fix with a little <a href="http://bl.ocks.org/mbostock/1166403">help</a> from the <code>d3</code> master <a href="http://bost.ocks.org/mike/">Mike Bostock</a>.  I built a custom <a href="http://timelyportfolio.github.io/rCharts_dimple/assets/chart_d3dateaxis.html">layout template</a> to remove the <code>dimple</code> x-axis and replace with a <code>d3</code> version featuring much better date/time support.  To access it, we can set it with a little hack (I have a little inside information that this will soon become much easier).</p>

<pre><code class="r">d2 &lt;- d1
d2$field(
  &#39;templates&#39;,
  modifyList(d2$templates, list(id = &quot;chart2&quot;, script = &#39;http://timelyportfolio.github.io/rCharts_dimple/assets/chart_d3dateaxis.html&#39;) )
)
d2
</code></pre>

<div id='chart2' class='rChart dimple'></div>
  <p>Sorry for the little advanced topic.  The author of dimplejs says better date handling is on his TO-DO list.</p>
</section>
<section id="slide-6">
  <div class="page-header">
    <h1>Line Chart with all Maturities</h1>
  </div>
<p>Most portfolio managers/analysts will want more than just the US 10y.  Let&#39;s plot all the maturities with just one little <code>groups</code> addition in our <code>dPlot</code>.  I also anticipate that we will need a legend to identify our maturities by color so we will also add a legend.</p>

<pre><code class="r">#simple line chart of all maturities
d3 &lt;- dPlot(
  value ~ date,  #or x=&quot;date&quot;, y=&quot;value&quot;
  groups = &#39;maturity&#39;,
  data = ust.melt,  #get all maturities so remove subset from above
  type = &#39;line&#39;
)
d3$legend( x = 60, y = 10, width = 620, height = 20,
  horizontalAlign = &quot;right&quot;)
d3$field(
  &#39;templates&#39;,
  modifyList(d3$templates, list(id = &quot;chart3&quot;, script = &#39;http://timelyportfolio.github.io/rCharts_dimple/assets/chart_d3dateaxis.html&#39;) )
)
d3
</code></pre>

<div id='chart3' class='rChart dimple'></div>

</section>
<section id="slide-7">
  <div class="page-header">
    <h1>Line Chart by Maturity by Date</h1>
  </div>
  <p>I am still really proud of my chart displayed in this <a href="http://timelyportfolio.blogspot.com/2013/05/even-more-jgb-yield-charts-with-r.html">post</a>.  I bet we can do something like that but better since we will have interactivity.  Will it be hard?  Of course not, we just change our <code>x</code> in <code>dPlot()</code> and then sort with <code>d4$xAxis(grouporderRule=&quot;date&quot;)</code>.</p>

<pre><code class="r">#simple line chart of all maturities
d4 &lt;- dPlot(
  x = c(&quot;maturity&quot;,&quot;date&quot;),
  y = &quot;value&quot;,
  groups = &#39;maturity&#39;,
  data = ust.melt,
  type = &#39;line&#39;
)
d4$xAxis( grouporderRule = &quot;date&quot; ) #sort by date
d4$legend( x = 60, y = 10, width = 620, height = 20,
  horizontalAlign = &quot;right&quot;)
d4
</code></pre>

<div id='chart4' class='rChart dimple'></div>

</section>
<section id="slide-8">
  <div class="page-header">
    <h1>Yield Curve Storyboard</h1>
  </div>
  <p>Another way to look at yields would be as a yield curve.  Generally, this means remove time, but with <code>dimplejs</code> <code>storyboard</code> feature we can see the history of the yield curve.  Daily would be a little tedious, so let&#39;s do monthly 2013.  Watch closely.</p>

<pre><code class="r">#get weekly since April 2013
ust.melt &lt;- xtsMelt(ust.xts[endpoints(ust.xts,&quot;months&quot;),][&quot;2013::&quot;,])

ust.melt$date &lt;- format(as.Date(ust.melt$date),&quot;%m/%d/%Y&quot;)
ust.melt$value &lt;- as.numeric(ust.melt$value)
ust.melt$indexname &lt;- factor(
  ust.melt$indexname, levels = colnames(ust.xts)
)
ust.melt$maturity &lt;- as.numeric(
  substr(
    ust.melt$indexname, 4, length( ust.melt$indexname ) - 4
  )
)
ust.melt$country &lt;- rep( &quot;US&quot;, nrow( ust.melt ))

d5 &lt;- dPlot(
  value ~ maturity,
  data = ust.melt,
  type = &quot;line&quot;
)
d5$xAxis( orderRule =&quot;maturity&quot; )
d5$set( storyboard = &quot;date&quot; )
d5
</code></pre>

<div id='chart5' class='dimple'></div>

  <p>Telling a story with your data has never been so easy.  Add a little text content describing the change and next you will be presenting at <a href="http://eyeofestival.com/">Eyeo</a>.</p>

</section>
<section id="slide-9">
  <div class="page-header">
    <h1>Other dimplejs Chart Types</h1>
  </div>
<p>Just to make sure we cover some of the other plot types, let&#39;s draw our other two <code>dimplejs</code> options--area, bar, and bubble.</p>

<pre><code class="r">d6 &lt;- dPlot(
  x = &quot;date&quot;,
  y = &quot;value&quot;,
  groups = &quot;indexname&quot;,
  data = ust.melt,
  type = &quot;area&quot;
)
d6$xAxis( orderRule = &quot;date&quot; )
d6
</code></pre>


<div id='chart6' class='rChart dimple'></div>

<script type="text/javascript">
  var opts = {
 "dom": "chart6",
"width":    800,
"height":    400,
"x": "date",
"y": "value",
"groups": "indexname",
"type": "area",
"id": "chart6" 
},
    data3 = [
 {
 "date": "01/31/2013",
"indexname": "DGS1",
"value":   0.15,
"maturity":      1,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS1",
"value":   0.16,
"maturity":      1,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS1",
"value":   0.14,
"maturity":      1,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS1",
"value":   0.11,
"maturity":      1,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS1",
"value":   0.14,
"maturity":      1,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS1",
"value":   0.17,
"maturity":      1,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS2",
"value":   0.27,
"maturity":      2,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS2",
"value":   0.25,
"maturity":      2,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS2",
"value":   0.23,
"maturity":      2,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS2",
"value":    0.2,
"maturity":      2,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS2",
"value":    0.3,
"maturity":      2,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS2",
"value":   0.43,
"maturity":      2,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS3",
"value":    0.4,
"maturity":      3,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS3",
"value":   0.35,
"maturity":      3,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS3",
"value":   0.36,
"maturity":      3,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS3",
"value":    0.3,
"maturity":      3,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS3",
"value":   0.52,
"maturity":      3,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS3",
"value":   0.74,
"maturity":      3,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS5",
"value":   0.88,
"maturity":      5,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS5",
"value":   0.75,
"maturity":      5,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS5",
"value":   0.76,
"maturity":      5,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS5",
"value":   0.65,
"maturity":      5,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS5",
"value":   1.05,
"maturity":      5,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS5",
"value":   1.49,
"maturity":      5,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS7",
"value":    1.4,
"maturity":      7,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS7",
"value":   1.23,
"maturity":      7,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS7",
"value":   1.23,
"maturity":      7,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS7",
"value":   1.07,
"maturity":      7,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS7",
"value":   1.55,
"maturity":      7,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS7",
"value":   2.03,
"maturity":      7,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS10",
"value":   2.04,
"maturity":     10,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS10",
"value":   1.86,
"maturity":     10,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS10",
"value":   1.86,
"maturity":     10,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS10",
"value":   1.66,
"maturity":     10,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS10",
"value":   2.16,
"maturity":     10,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS10",
"value":    2.6,
"maturity":     10,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS20",
"value":   2.83,
"maturity":     20,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS20",
"value":   2.68,
"maturity":     20,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS20",
"value":    2.7,
"maturity":     20,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS20",
"value":   2.44,
"maturity":     20,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS20",
"value":   2.95,
"maturity":     20,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS20",
"value":   3.31,
"maturity":     20,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS30",
"value":   3.21,
"maturity":     30,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS30",
"value":   3.06,
"maturity":     30,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS30",
"value":   3.08,
"maturity":     30,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS30",
"value":   2.83,
"maturity":     30,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS30",
"value":    3.3,
"maturity":     30,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS30",
"value":    3.6,
"maturity":     30,
"country": "US" 
} 
],
    xAxis = {
 "type": "addCategoryAxis",
"showPercent": false,
"orderRule": "date" 
},
    yAxis = {
 "type": "addMeasureAxis",
"showPercent": false 
},
    zAxis = [],
    legend = [];
  var svg = dimple.newSvg("#" + opts.id, opts.width, opts.height);

  //data = dimple.filterData(data, "Owner", ["Aperture", "Black Mesa"])
  var myChart = new dimple.chart(svg, data3);
  if (opts.bounds) {
    myChart.setBounds(x = opts.bounds.x, y = opts.bounds.y, height = opts.bounds.height, width = opts.bounds.width);//myChart.setBounds(80, 30, 480, 330);
  }
  //dimple allows use of custom CSS with noFormats
  if(opts.noFormats) { myChart.noFormats = opts.noFormats; };
  //for markimekko and addAxis also have third parameter measure
  //so need to evaluate if measure provided
  //x axis
  var x;
  if(xAxis.measure) {
    x = myChart[xAxis.type]("x",opts.x,xAxis.measure);
  } else {
    x = myChart[xAxis.type]("x", opts.x);
  };
  if(!(xAxis.type === "addPctAxis")) x.showPercent = xAxis.showPercent;
  if (xAxis.orderRule) x.addOrderRule(xAxis.orderRule);
  if (xAxis.grouporderRule) x.addGroupOrderRule(xAxis.grouporderRule);  
  if (xAxis.overrideMin) x.overrideMin = xAxis.overrideMin;
  if (xAxis.overrideMax) x.overrideMax = xAxis.overrideMax;
  //y axis
  var y;
  if(yAxis.measure) {
    y = myChart[yAxis.type]("y",opts.y,yAxis.measure);
  } else {
    y = myChart[yAxis.type]("y", opts.y);
  };
  if(!(yAxis.type === "addPctAxis")) y.showPercent = yAxis.showPercent;
  if (yAxis.orderRule) y.addOrderRule(yAxis.orderRule);
  if (yAxis.grouporderRule) y.addGroupOrderRule(yAxis.grouporderRule);
  if (yAxis.overrideMin) y.overrideMin = yAxis.overrideMin;
  if (yAxis.overrideMax) y.overrideMax = yAxis.overrideMax;
  //z for bubbles
    var z;
  if (!(typeof(zAxis) === 'undefined') && zAxis.type){
    if(zAxis.measure) {
      z = myChart[zAxis.type]("z",opts.z,zAxis.measure);
    } else {
      z = myChart[zAxis.type]("z", opts.z);
    };
    if(!(zAxis.type === "addPctAxis")) z.showPercent = zAxis.showPercent;
    if (zAxis.orderRule) z.addOrderRule(zAxis.orderRule);
    if (zAxis.overrideMin) z.overrideMin = zAxis.overrideMin;
    if (zAxis.overrideMax) z.overrideMax = zAxis.overrideMax;
  }
  //here need think I need to evaluate group and if missing do null
  //as the first argument
  //if provided need to use groups from opts
  if(opts.hasOwnProperty("groups")) {
    var s = myChart.addSeries( opts.groups, dimple.plot[opts.type] );
    //series offers an aggregate method that we will also need to check if available
    //options available are avg, count, max, min, sum
    if (!(typeof(opts.aggregate) === 'undefined')) {
      s.aggregate = eval(opts.aggregate);
    }
    if (!(typeof(opts.lineWeight) === 'undefined')) {
      s.lineWeight = eval(opts.lineWeight);
    }
    if (!(typeof(opts.barGap) === 'undefined')) {
      s.barGap = eval(opts.barGap);
    }    
  } else var s = myChart.addSeries( null, dimple.plot[opts.type] );
  //unsure if this is best but if legend is provided (not empty) then evaluate
  if(d3.keys(legend).length > 0) {
    var l =myChart.addLegend();
    d3.keys(legend).forEach(function(d){
      l[d] = legend[d];
    });
  }
  //quick way to get this going but need to make this cleaner
  if(opts.storyboard) {
    myChart.setStoryboard(opts.storyboard);
  };
  myChart.draw();

</script>

<p>And although a stacked 100% bar does not make a lot of sense with this data, here is how we might do that by changing <code>type = &quot;bar&quot;</code> and <code>d7$yAxis( type = &quot;addPctAxis&quot; )</code>.</p>

<pre><code class="r">d7 &lt;- dPlot(
  x = &quot;date&quot;,
  y = &quot;value&quot;,
  groups = &quot;indexname&quot;,
  data = ust.melt,
  type = &quot;bar&quot;
)
d7$xAxis( orderRule = &quot;date&quot; )
d7$yAxis( type = &quot;addPctAxis&quot; )
d7
</code></pre>


<div id='chart7' class='rChart dimple'></div>

<script type="text/javascript">
  var opts = {
 "dom": "chart7",
"width":    800,
"height":    400,
"x": "date",
"y": "value",
"groups": "indexname",
"type": "bar",
"id": "chart7" 
},
    data3 = [
 {
 "date": "01/31/2013",
"indexname": "DGS1",
"value":   0.15,
"maturity":      1,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS1",
"value":   0.16,
"maturity":      1,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS1",
"value":   0.14,
"maturity":      1,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS1",
"value":   0.11,
"maturity":      1,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS1",
"value":   0.14,
"maturity":      1,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS1",
"value":   0.17,
"maturity":      1,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS2",
"value":   0.27,
"maturity":      2,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS2",
"value":   0.25,
"maturity":      2,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS2",
"value":   0.23,
"maturity":      2,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS2",
"value":    0.2,
"maturity":      2,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS2",
"value":    0.3,
"maturity":      2,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS2",
"value":   0.43,
"maturity":      2,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS3",
"value":    0.4,
"maturity":      3,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS3",
"value":   0.35,
"maturity":      3,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS3",
"value":   0.36,
"maturity":      3,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS3",
"value":    0.3,
"maturity":      3,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS3",
"value":   0.52,
"maturity":      3,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS3",
"value":   0.74,
"maturity":      3,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS5",
"value":   0.88,
"maturity":      5,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS5",
"value":   0.75,
"maturity":      5,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS5",
"value":   0.76,
"maturity":      5,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS5",
"value":   0.65,
"maturity":      5,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS5",
"value":   1.05,
"maturity":      5,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS5",
"value":   1.49,
"maturity":      5,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS7",
"value":    1.4,
"maturity":      7,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS7",
"value":   1.23,
"maturity":      7,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS7",
"value":   1.23,
"maturity":      7,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS7",
"value":   1.07,
"maturity":      7,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS7",
"value":   1.55,
"maturity":      7,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS7",
"value":   2.03,
"maturity":      7,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS10",
"value":   2.04,
"maturity":     10,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS10",
"value":   1.86,
"maturity":     10,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS10",
"value":   1.86,
"maturity":     10,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS10",
"value":   1.66,
"maturity":     10,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS10",
"value":   2.16,
"maturity":     10,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS10",
"value":    2.6,
"maturity":     10,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS20",
"value":   2.83,
"maturity":     20,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS20",
"value":   2.68,
"maturity":     20,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS20",
"value":    2.7,
"maturity":     20,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS20",
"value":   2.44,
"maturity":     20,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS20",
"value":   2.95,
"maturity":     20,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS20",
"value":   3.31,
"maturity":     20,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS30",
"value":   3.21,
"maturity":     30,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS30",
"value":   3.06,
"maturity":     30,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS30",
"value":   3.08,
"maturity":     30,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS30",
"value":   2.83,
"maturity":     30,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS30",
"value":    3.3,
"maturity":     30,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS30",
"value":    3.6,
"maturity":     30,
"country": "US" 
} 
],
    xAxis = {
 "type": "addCategoryAxis",
"showPercent": false,
"orderRule": "date" 
},
    yAxis = {
 "type": "addPctAxis",
"showPercent": false 
},
    zAxis = [],
    legend = [];
  var svg = dimple.newSvg("#" + opts.id, opts.width, opts.height);

  //data = dimple.filterData(data, "Owner", ["Aperture", "Black Mesa"])
  var myChart = new dimple.chart(svg, data3);
  if (opts.bounds) {
    myChart.setBounds(x = opts.bounds.x, y = opts.bounds.y, height = opts.bounds.height, width = opts.bounds.width);//myChart.setBounds(80, 30, 480, 330);
  }
  //dimple allows use of custom CSS with noFormats
  if(opts.noFormats) { myChart.noFormats = opts.noFormats; };
  //for markimekko and addAxis also have third parameter measure
  //so need to evaluate if measure provided
  //x axis
  var x;
  if(xAxis.measure) {
    x = myChart[xAxis.type]("x",opts.x,xAxis.measure);
  } else {
    x = myChart[xAxis.type]("x", opts.x);
  };
  if(!(xAxis.type === "addPctAxis")) x.showPercent = xAxis.showPercent;
  if (xAxis.orderRule) x.addOrderRule(xAxis.orderRule);
  if (xAxis.grouporderRule) x.addGroupOrderRule(xAxis.grouporderRule);  
  if (xAxis.overrideMin) x.overrideMin = xAxis.overrideMin;
  if (xAxis.overrideMax) x.overrideMax = xAxis.overrideMax;
  //y axis
  var y;
  if(yAxis.measure) {
    y = myChart[yAxis.type]("y",opts.y,yAxis.measure);
  } else {
    y = myChart[yAxis.type]("y", opts.y);
  };
  if(!(yAxis.type === "addPctAxis")) y.showPercent = yAxis.showPercent;
  if (yAxis.orderRule) y.addOrderRule(yAxis.orderRule);
  if (yAxis.grouporderRule) y.addGroupOrderRule(yAxis.grouporderRule);
  if (yAxis.overrideMin) y.overrideMin = yAxis.overrideMin;
  if (yAxis.overrideMax) y.overrideMax = yAxis.overrideMax;
  //z for bubbles
    var z;
  if (!(typeof(zAxis) === 'undefined') && zAxis.type){
    if(zAxis.measure) {
      z = myChart[zAxis.type]("z",opts.z,zAxis.measure);
    } else {
      z = myChart[zAxis.type]("z", opts.z);
    };
    if(!(zAxis.type === "addPctAxis")) z.showPercent = zAxis.showPercent;
    if (zAxis.orderRule) z.addOrderRule(zAxis.orderRule);
    if (zAxis.overrideMin) z.overrideMin = zAxis.overrideMin;
    if (zAxis.overrideMax) z.overrideMax = zAxis.overrideMax;
  }
  //here need think I need to evaluate group and if missing do null
  //as the first argument
  //if provided need to use groups from opts
  if(opts.hasOwnProperty("groups")) {
    var s = myChart.addSeries( opts.groups, dimple.plot[opts.type] );
    //series offers an aggregate method that we will also need to check if available
    //options available are avg, count, max, min, sum
    if (!(typeof(opts.aggregate) === 'undefined')) {
      s.aggregate = eval(opts.aggregate);
    }
    if (!(typeof(opts.lineWeight) === 'undefined')) {
      s.lineWeight = eval(opts.lineWeight);
    }
    if (!(typeof(opts.barGap) === 'undefined')) {
      s.barGap = eval(opts.barGap);
    }    
  } else var s = myChart.addSeries( null, dimple.plot[opts.type] );
  //unsure if this is best but if legend is provided (not empty) then evaluate
  if(d3.keys(legend).length > 0) {
    var l =myChart.addLegend();
    d3.keys(legend).forEach(function(d){
      l[d] = legend[d];
    });
  }
  //quick way to get this going but need to make this cleaner
  if(opts.storyboard) {
    myChart.setStoryboard(opts.storyboard);
  };
  myChart.draw();

</script>

<p>Bubble also might not be the best way to plot yields, but here is an example.</p>

<pre><code class="r">d8 &lt;- dPlot(
  x = c(&quot;indexname&quot;,&quot;date&quot;),
  y = &quot;value&quot;,
  z = &quot;value&quot;,
  groups = &quot;indexname&quot;,
  data = ust.melt,
  type = &quot;bubble&quot;
)
d8$xAxis( grouporderRule = &quot;date&quot;, orderRule = &quot;maturity&quot; )
d8$zAxis( type = &quot;addMeasureAxis&quot;, overrideMax = 10 )
d8
</code></pre>


<div id='chart8' class='rChart dimple'></div>

<script type="text/javascript">
  var opts = {
 "dom": "chart8",
"width":    800,
"height":    400,
"x": [ "indexname", "date" ],
"y": "value",
"z": "value",
"groups": "indexname",
"type": "bubble",
"id": "chart8" 
},
    data = [
 {
 "date": "01/31/2013",
"indexname": "DGS1",
"value":   0.15,
"maturity":      1,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS1",
"value":   0.16,
"maturity":      1,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS1",
"value":   0.14,
"maturity":      1,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS1",
"value":   0.11,
"maturity":      1,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS1",
"value":   0.14,
"maturity":      1,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS1",
"value":   0.17,
"maturity":      1,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS2",
"value":   0.27,
"maturity":      2,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS2",
"value":   0.25,
"maturity":      2,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS2",
"value":   0.23,
"maturity":      2,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS2",
"value":    0.2,
"maturity":      2,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS2",
"value":    0.3,
"maturity":      2,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS2",
"value":   0.43,
"maturity":      2,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS3",
"value":    0.4,
"maturity":      3,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS3",
"value":   0.35,
"maturity":      3,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS3",
"value":   0.36,
"maturity":      3,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS3",
"value":    0.3,
"maturity":      3,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS3",
"value":   0.52,
"maturity":      3,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS3",
"value":   0.74,
"maturity":      3,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS5",
"value":   0.88,
"maturity":      5,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS5",
"value":   0.75,
"maturity":      5,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS5",
"value":   0.76,
"maturity":      5,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS5",
"value":   0.65,
"maturity":      5,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS5",
"value":   1.05,
"maturity":      5,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS5",
"value":   1.49,
"maturity":      5,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS7",
"value":    1.4,
"maturity":      7,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS7",
"value":   1.23,
"maturity":      7,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS7",
"value":   1.23,
"maturity":      7,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS7",
"value":   1.07,
"maturity":      7,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS7",
"value":   1.55,
"maturity":      7,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS7",
"value":   2.03,
"maturity":      7,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS10",
"value":   2.04,
"maturity":     10,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS10",
"value":   1.86,
"maturity":     10,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS10",
"value":   1.86,
"maturity":     10,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS10",
"value":   1.66,
"maturity":     10,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS10",
"value":   2.16,
"maturity":     10,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS10",
"value":    2.6,
"maturity":     10,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS20",
"value":   2.83,
"maturity":     20,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS20",
"value":   2.68,
"maturity":     20,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS20",
"value":    2.7,
"maturity":     20,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS20",
"value":   2.44,
"maturity":     20,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS20",
"value":   2.95,
"maturity":     20,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS20",
"value":   3.31,
"maturity":     20,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS30",
"value":   3.21,
"maturity":     30,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS30",
"value":   3.06,
"maturity":     30,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS30",
"value":   3.08,
"maturity":     30,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS30",
"value":   2.83,
"maturity":     30,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS30",
"value":    3.3,
"maturity":     30,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS30",
"value":    3.6,
"maturity":     30,
"country": "US" 
} 
],
    xAxis = {
 "type": "addCategoryAxis",
"showPercent": false,
"grouporderRule": "date",
"orderRule": "maturity" 
},
    yAxis = {
 "type": "addMeasureAxis",
"showPercent": false 
},
    zAxis = {
 "type": "addMeasureAxis",
"overrideMax":     10 
},
    legend = [];
  var svg = dimple.newSvg("#" + opts.id, opts.width, opts.height);

  //data = dimple.filterData(data, "Owner", ["Aperture", "Black Mesa"])
  var myChart = new dimple.chart(svg, data);
  if (opts.bounds) {
    myChart.setBounds(x = opts.bounds.x, y = opts.bounds.y, height = opts.bounds.height, width = opts.bounds.width);//myChart.setBounds(80, 30, 480, 330);
  }
  //dimple allows use of custom CSS with noFormats
  if(opts.noFormats) { myChart.noFormats = opts.noFormats; };
  //for markimekko and addAxis also have third parameter measure
  //so need to evaluate if measure provided
  //x axis
  var x;
  if(xAxis.measure) {
    x = myChart[xAxis.type]("x",opts.x,xAxis.measure);
  } else {
    x = myChart[xAxis.type]("x", opts.x);
  };
  if(!(xAxis.type === "addPctAxis")) x.showPercent = xAxis.showPercent;
  if (xAxis.orderRule) x.addOrderRule(xAxis.orderRule);
  if (xAxis.grouporderRule) x.addGroupOrderRule(xAxis.grouporderRule);  
  if (xAxis.overrideMin) x.overrideMin = xAxis.overrideMin;
  if (xAxis.overrideMax) x.overrideMax = xAxis.overrideMax;
  //y axis
  var y;
  if(yAxis.measure) {
    y = myChart[yAxis.type]("y",opts.y,yAxis.measure);
  } else {
    y = myChart[yAxis.type]("y", opts.y);
  };
  if(!(yAxis.type === "addPctAxis")) y.showPercent = yAxis.showPercent;
  if (yAxis.orderRule) y.addOrderRule(yAxis.orderRule);
  if (yAxis.grouporderRule) y.addGroupOrderRule(yAxis.grouporderRule);
  if (yAxis.overrideMin) y.overrideMin = yAxis.overrideMin;
  if (yAxis.overrideMax) y.overrideMax = yAxis.overrideMax;
  //z for bubbles
    var z;
  if (!(typeof(zAxis) === 'undefined') && zAxis.type){
    if(zAxis.measure) {
      z = myChart[zAxis.type]("z",opts.z,zAxis.measure);
    } else {
      z = myChart[zAxis.type]("z", opts.z);
    };
    if(!(zAxis.type === "addPctAxis")) z.showPercent = zAxis.showPercent;
    if (zAxis.orderRule) z.addOrderRule(zAxis.orderRule);
    if (zAxis.overrideMin) z.overrideMin = zAxis.overrideMin;
    if (zAxis.overrideMax) z.overrideMax = zAxis.overrideMax;
  }
  //here need think I need to evaluate group and if missing do null
  //as the first argument
  //if provided need to use groups from opts
  if(opts.hasOwnProperty("groups")) {
    var s = myChart.addSeries( opts.groups, dimple.plot[opts.type] );
    //series offers an aggregate method that we will also need to check if available
    //options available are avg, count, max, min, sum
    if (!(typeof(opts.aggregate) === 'undefined')) {
      s.aggregate = eval(opts.aggregate);
    }
    if (!(typeof(opts.lineWeight) === 'undefined')) {
      s.lineWeight = eval(opts.lineWeight);
    }
    if (!(typeof(opts.barGap) === 'undefined')) {
      s.barGap = eval(opts.barGap);
    }    
  } else var s = myChart.addSeries( null, dimple.plot[opts.type] );
  //unsure if this is best but if legend is provided (not empty) then evaluate
  if(d3.keys(legend).length > 0) {
    var l =myChart.addLegend();
    d3.keys(legend).forEach(function(d){
      l[d] = legend[d];
    });
  }
  //quick way to get this going but need to make this cleaner
  if(opts.storyboard) {
    myChart.setStoryboard(opts.storyboard);
  };
  myChart.draw();

</script>

</section>
<section id="slide-10">
  <div class="page-header">
    <h1>More rCharts, slidify, and dimplejs</h1>
  </div>
  <p>The beauty of <a href="http://rcharts.io/site">rCharts</a> is its ability to harness the ingenuity from the entire ecosystem inside and outside of <code>r</code>.  Whole libraries, such as <a href="http://dimplejs.org">dimplejs</a>, <a href="http://nvd3.org">nvd3</a>, <a href="http://code.shutterstock.com/rickshaw/">rickshaw</a>, <a href="http://highcharts.com">highcharts</a>, <a href="http://www.oesmith.co.uk/morris.js/">morris</a>, and <a href="http://www.polychartjs.com/">polycharts</a>, or even specific custom <a href="http://rcharts.io/site/gallery.html">visualizations</a> can quickly be incorporated into your workflow and publishing.  If desired, these can be delivered in various reproducible formats with <a href="http://slidify.org">slidify</a>.  I strongly encourage you to check out <a href="http://rcharts.io/site">rCharts</a>, <a href="http://slidify.org">slidify</a>, and <a href="http://dimplejs.org">dimplejs</a>.  They have changed my world.</p>

</section>
<section id="slide-11">
  <div class="page-header">
    <h1>Thanks:</h1>
  </div>
  <ul>
<li><a href="http://github.com/ramnathv">Ramnath Vaidyanathan</a> for his amazing dedication, responsiveness, and help with <a href="http://rcharts.io/site">rCharts</a> and <a href="http://slidify.org">slidify</a>.</li>
<li><a href="https://twitter.com/jkiernander">John Kiernander</a> for <code>dimplejs</code>[<a href="http://dimplejs.org">http://dimplejs.org</a>] and his seemingly infinite supply of helpful and inspirational <a href="http://dimplejs.org/advanced_examples_index.html">examples</a>.</li>
<li><a href="http://bost.ocks.org/mike/example/">Mike Bostock</a> for everything.</li>
<li><a href="http://aozora.github.io/bootplus/">Marcello Palmitessa</a> for the beautiful Bootplus that serves as the template for this post.</li>
</ul>

</section>
    </div>
  </div>
  </div> <!-- container -->
<script type="text/javascript">

var data;
var extdata;

queue(2)
  .defer(d3.json,"data/ustdata10y.json")
  .defer(d3.csv,"data/ustdata.csv")
  .await(drawcharts);
  

function drawcharts(error, data, extdata){
  var opts = {
 "dom": "chart1",
"width":    800,
"height":    400,
"x": "date",
"y": "value",
"type": "line",
"id": "chart1" 
},
    xAxis = {
 "type": "addCategoryAxis",
"showPercent": false 
},
    yAxis = {
 "type": "addMeasureAxis",
"showPercent": false 
},
    zAxis = [],
    legend = [];
  var svg = dimple.newSvg("#" + opts.id, opts.width, opts.height);

  //data = dimple.filterData(data, "Owner", ["Aperture", "Black Mesa"])
  var myChart = new dimple.chart(svg, data);
  if (opts.bounds) {
    myChart.setBounds(x = opts.bounds.x, y = opts.bounds.y, height = opts.bounds.height, width = opts.bounds.width);//myChart.setBounds(80, 30, 480, 330);
  }
  //dimple allows use of custom CSS with noFormats
  if(opts.noFormats) { myChart.noFormats = opts.noFormats; };
  //for markimekko and addAxis also have third parameter measure
  //so need to evaluate if measure provided
  //x axis
  var x;
  if(xAxis.measure) {
    x = myChart[xAxis.type]("x",opts.x,xAxis.measure);
  } else {
    x = myChart[xAxis.type]("x", opts.x);
  };
  if(!(xAxis.type === "addPctAxis")) x.showPercent = xAxis.showPercent;
  if (xAxis.orderRule) x.addOrderRule(xAxis.orderRule);
  if (xAxis.grouporderRule) x.addGroupOrderRule(xAxis.grouporderRule);  
  if (xAxis.overrideMin) x.overrideMin = xAxis.overrideMin;
  if (xAxis.overrideMax) x.overrideMax = xAxis.overrideMax;
  //y axis
  var y;
  if(yAxis.measure) {
    y = myChart[yAxis.type]("y",opts.y,yAxis.measure);
  } else {
    y = myChart[yAxis.type]("y", opts.y);
  };
  if(!(yAxis.type === "addPctAxis")) y.showPercent = yAxis.showPercent;
  if (yAxis.orderRule) y.addOrderRule(yAxis.orderRule);
  if (yAxis.grouporderRule) y.addGroupOrderRule(yAxis.grouporderRule);
  if (yAxis.overrideMin) y.overrideMin = yAxis.overrideMin;
  if (yAxis.overrideMax) y.overrideMax = yAxis.overrideMax;
  //z for bubbles
    var z;
  if (!(typeof(zAxis) === 'undefined') && zAxis.type){
    if(zAxis.measure) {
      z = myChart[zAxis.type]("z",opts.z,zAxis.measure);
    } else {
      z = myChart[zAxis.type]("z", opts.z);
    };
    if(!(zAxis.type === "addPctAxis")) z.showPercent = zAxis.showPercent;
    if (zAxis.orderRule) z.addOrderRule(zAxis.orderRule);
    if (zAxis.overrideMin) z.overrideMin = zAxis.overrideMin;
    if (zAxis.overrideMax) z.overrideMax = zAxis.overrideMax;
  }
  //here need think I need to evaluate group and if missing do null
  //as the first argument
  //if provided need to use groups from opts
  if(opts.hasOwnProperty("groups")) {
    var s = myChart.addSeries( opts.groups, dimple.plot[opts.type] );
    //series offers an aggregate method that we will also need to check if available
    //options available are avg, count, max, min, sum
    if (!(typeof(opts.aggregate) === 'undefined')) {
      s.aggregate = eval(opts.aggregate);
    }
    if (!(typeof(opts.lineWeight) === 'undefined')) {
      s.lineWeight = eval(opts.lineWeight);
    }
    if (!(typeof(opts.barGap) === 'undefined')) {
      s.barGap = eval(opts.barGap);
    }    
  } else var s = myChart.addSeries( null, dimple.plot[opts.type] );
  //unsure if this is best but if legend is provided (not empty) then evaluate
  if(d3.keys(legend).length > 0) {
    var l =myChart.addLegend();
    d3.keys(legend).forEach(function(d){
      l[d] = legend[d];
    });
  }
  //quick way to get this going but need to make this cleaner
  if(opts.storyboard) {
    myChart.setStoryboard(opts.storyboard);
  };
  myChart.draw();
  
  var opts = {
 "dom": "chart2",
"width":    800,
"height":    400,
"x": "date",
"y": "value",
"type": "line",
"id": "chart2" 
},
    xAxis = {
 "type": "addCategoryAxis",
"showPercent": false 
},
    yAxis = {
 "type": "addMeasureAxis",
"showPercent": false 
},
    zAxis = [],
    legend = [];
  var svg = dimple.newSvg("#" + opts.id, opts.width, opts.height);

  //data = dimple.filterData(data, "Owner", ["Aperture", "Black Mesa"])
  var myChart = new dimple.chart(svg, data);
  if (opts.bounds) {
    myChart.setBounds(x = opts.bounds.x, y = opts.bounds.y, height = opts.bounds.height, width = opts.bounds.width);//myChart.setBounds(80, 30, 480, 330);
  }
  //dimple allows use of custom CSS with noFormats
  if(opts.noFormats) { myChart.noFormats = opts.noFormats; };
  //for markimekko and addAxis also have third parameter measure
  //so need to evaluate if measure provided
  //x axis
  var x;
  if(xAxis.measure) {
    x = myChart[xAxis.type]("x",opts.x,xAxis.measure);
  } else {
    x = myChart[xAxis.type]("x", opts.x);
  };
  if(!(xAxis.type === "addPctAxis")) x.showPercent = xAxis.showPercent;
  if (xAxis.orderRule) x.addOrderRule(xAxis.orderRule);
  if (xAxis.grouporderRule) x.addGroupOrderRule(xAxis.grouporderRule);  
  if (xAxis.overrideMin) x.overrideMin = xAxis.overrideMin;
  if (xAxis.overrideMax) x.overrideMax = xAxis.overrideMax;
  //y axis
  var y;
  if(yAxis.measure) {
    y = myChart[yAxis.type]("y",opts.y,yAxis.measure);
  } else {
    y = myChart[yAxis.type]("y", opts.y);
  };
  if(!(yAxis.type === "addPctAxis")) y.showPercent = yAxis.showPercent;
  if (yAxis.orderRule) y.addOrderRule(yAxis.orderRule);
  if (yAxis.grouporderRule) y.addGroupOrderRule(yAxis.grouporderRule);
  if (yAxis.overrideMin) y.overrideMin = yAxis.overrideMin;
  if (yAxis.overrideMax) y.overrideMax = yAxis.overrideMax;
  //z for bubbles
    var z;
  if (!(typeof(zAxis) === 'undefined') && zAxis.type){
    if(zAxis.measure) {
      z = myChart[zAxis.type]("z",opts.z,zAxis.measure);
    } else {
      z = myChart[zAxis.type]("z", opts.z);
    };
    if(!(zAxis.type === "addPctAxis")) z.showPercent = zAxis.showPercent;
    if (zAxis.orderRule) z.addOrderRule(zAxis.orderRule);
    if (zAxis.overrideMin) z.overrideMin = zAxis.overrideMin;
    if (zAxis.overrideMax) z.overrideMax = zAxis.overrideMax;
  }
  //here need think I need to evaluate group and if missing do null
  //as the first argument
  //if provided need to use groups from opts
  if(opts.hasOwnProperty("groups")) {
    var s = myChart.addSeries( opts.groups, dimple.plot[opts.type] );
    //series offers an aggregate method that we will also need to check if available
    //options available are avg, count, max, min, sum
    if (!(typeof(opts.aggregate) === 'undefined')) {
      s.aggregate = eval(opts.aggregate);
    }
    if (!(typeof(opts.lineWeight) === 'undefined')) {
      s.lineWeight = eval(opts.lineWeight);
    }
    if (!(typeof(opts.barGap) === 'undefined')) {
      s.barGap = eval(opts.barGap);
    }    
  } else var s = myChart.addSeries( null, dimple.plot[opts.type] );
  //unsure if this is best but if legend is provided (not empty) then evaluate
  if(d3.keys(legend).length > 0) {
    var l =myChart.addLegend();
    d3.keys(legend).forEach(function(d){
      l[d] = legend[d];
    });
  }
  //quick way to get this going but need to make this cleaner
  if(opts.storyboard) {
    myChart.setStoryboard(opts.storyboard);
  };
  myChart.draw();

//add this as a way to work around current lack of features for 
//times on x axis in dimple

var datad3 = data;
//get Dates in d3 js format
datad3.forEach(function(d) {
  d.date = new Date(d.date);
  //d.value = +d.value;
});
//sort since order gets messed up
data.sort(function(a,b){return d3.ascending(a.date,b.date);})

//remove dimple axis
//hoping x is always drawn first
d3.select('#'+opts.id).select(".axis").remove()

//from Bostock example http://bl.ocks.org/mbostock/1166403

// Scales and axes. Note the inverted domain for the y-scale: bigger is up!
var xd3 = d3.time.scale().range([myChart.x, myChart.x + myChart.width]),
    yd3 = d3.scale.linear().range([myChart.y+myChart.height,myChart.y]),
    xAxisd3 = d3.svg.axis().scale(xd3).tickSize(4).tickSubdivide(true),
    yAxis = d3.svg.axis().scale(yd3).ticks(4).orient("right");

xd3.domain([datad3[0].date, datad3[datad3.length - 1].date]);
yd3.domain([0, d3.max(datad3, function(d) { return d.value; })]).nice();

var svg = d3.select('#'+opts.id).select('svg')
svg.append("g")
  .attr("class", "x axis")
  .attr("transform", "translate(0," + (+myChart.height+myChart.y) + ")")
  .call(xAxisd3);


  var opts = {
 "dom": "chart3",
"width":    800,
"height":    400,
"x": "date",
"y": "value",
"groups": "maturity",
"type": "line",
"id": "chart3" 
},
    xAxis = {
 "type": "addCategoryAxis",
"showPercent": false 
},
    yAxis = {
 "type": "addMeasureAxis",
"showPercent": false 
},
    zAxis = [],
    legend = {
 "x":     60,
"y":     10,
"width":    620,
"height":     20,
"horizontalAlign": "right" 
};    
    var svg = dimple.newSvg("#" + opts.id, opts.width, opts.height);
    var myChart = new dimple.chart(svg, extdata);
  
  if (opts.bounds) {
    myChart.setBounds(x = opts.bounds.x, y = opts.bounds.y, height = opts.bounds.height, width = opts.bounds.width);//myChart.setBounds(80, 30, 480, 330);
  }
  //dimple allows use of custom CSS with noFormats
  if(opts.noFormats) { myChart.noFormats = opts.noFormats; };
  //for markimekko and addAxis also have third parameter measure
  //so need to evaluate if measure provided
  //x axis
  var x;
  if(xAxis.measure) {
    x = myChart[xAxis.type]("x",opts.x,xAxis.measure);
  } else {
    x = myChart[xAxis.type]("x", opts.x);
  };
  if(!(xAxis.type === "addPctAxis")) x.showPercent = xAxis.showPercent;
  if (xAxis.orderRule) x.addOrderRule(xAxis.orderRule);
  if (xAxis.grouporderRule) x.addGroupOrderRule(xAxis.grouporderRule);  
  if (xAxis.overrideMin) x.overrideMin = xAxis.overrideMin;
  if (xAxis.overrideMax) x.overrideMax = xAxis.overrideMax;
  //y axis
  var y;
  if(yAxis.measure) {
    y = myChart[yAxis.type]("y",opts.y,yAxis.measure);
  } else {
    y = myChart[yAxis.type]("y", opts.y);
  };
  if(!(yAxis.type === "addPctAxis")) y.showPercent = yAxis.showPercent;
  if (yAxis.orderRule) y.addOrderRule(yAxis.orderRule);
  if (yAxis.grouporderRule) y.addGroupOrderRule(yAxis.grouporderRule);
  if (yAxis.overrideMin) y.overrideMin = yAxis.overrideMin;
  if (yAxis.overrideMax) y.overrideMax = yAxis.overrideMax;
  //z for bubbles
    var z;
  if (!(typeof(zAxis) === 'undefined') && zAxis.type){
    if(zAxis.measure) {
      z = myChart[zAxis.type]("z",opts.z,zAxis.measure);
    } else {
      z = myChart[zAxis.type]("z", opts.z);
    };
    if(!(zAxis.type === "addPctAxis")) z.showPercent = zAxis.showPercent;
    if (zAxis.orderRule) z.addOrderRule(zAxis.orderRule);
    if (zAxis.overrideMin) z.overrideMin = zAxis.overrideMin;
    if (zAxis.overrideMax) z.overrideMax = zAxis.overrideMax;
  }
  //here need think I need to evaluate group and if missing do null
  //as the first argument
  //if provided need to use groups from opts
  if(opts.hasOwnProperty("groups")) {
    var s = myChart.addSeries( opts.groups, dimple.plot[opts.type] );
    //series offers an aggregate method that we will also need to check if available
    //options available are avg, count, max, min, sum
    if (!(typeof(opts.aggregate) === 'undefined')) {
      s.aggregate = eval(opts.aggregate);
    }
    if (!(typeof(opts.lineWeight) === 'undefined')) {
      s.lineWeight = eval(opts.lineWeight);
    }
    if (!(typeof(opts.barGap) === 'undefined')) {
      s.barGap = eval(opts.barGap);
    }    
  } else var s = myChart.addSeries( null, dimple.plot[opts.type] );
  //unsure if this is best but if legend is provided (not empty) then evaluate
  if(d3.keys(legend).length > 0) {
    var l =myChart.addLegend();
    d3.keys(legend).forEach(function(d){
      l[d] = legend[d];
    });
  }
  //quick way to get this going but need to make this cleaner
  if(opts.storyboard) {
    myChart.setStoryboard(opts.storyboard);
  };
  myChart.draw();

//add this as a way to work around current lack of features for 
//times on x axis in dimple

//get Dates in d3 js format
extdatad3 = extdata;
extdatad3.forEach(function(d) {
  d.date = new Date(d.date);
  //d.value = +d.value;
});
//sort since order gets messed up
extdatad3.sort(function(a,b){return d3.ascending(a.date,b.date);})

//remove dimple axis
//hoping x is always drawn first
d3.select('#'+opts.id).select(".axis").remove()

//from Bostock example http://bl.ocks.org/mbostock/1166403

// Scales and axes. Note the inverted domain for the y-scale: bigger is up!
var xd3 = d3.time.scale().range([myChart.x, myChart.x + myChart.width]),
    yd3 = d3.scale.linear().range([myChart.y+myChart.height,myChart.y]),
    xAxisd3 = d3.svg.axis().scale(xd3).tickSize(4).tickSubdivide(true),
    yAxis = d3.svg.axis().scale(yd3).ticks(4).orient("right");

xd3.domain([extdatad3[0].date, extdatad3[extdatad3.length - 1].date]);
yd3.domain([0, d3.max(extdatad3, function(d) { return d.value; })]).nice();

var svg = d3.select('#'+opts.id).select('svg')
svg.append("g")
  .attr("class", "x axis")
  .attr("transform", "translate(0," + (+myChart.height+myChart.y) + ")")
  .call(xAxisd3);


  var opts = {
 "dom": "chart4",
"width":    800,
"height":    400,
"x": [ "maturity", "date" ],
"y": "value",
"groups": "maturity",
"type": "line",
"id": "chart4" 
},
    xAxis = {
 "type": "addCategoryAxis",
"showPercent": false,
"grouporderRule": "date" 
},
    yAxis = {
 "type": "addMeasureAxis",
"showPercent": false 
},
    zAxis = [],
    legend = {
 "x":     60,
"y":     10,
"width":    620,
"height":     20,
"horizontalAlign": "right" 
};
  var svg = dimple.newSvg("#" + opts.id, opts.width, opts.height);

  //data = dimple.filterData(data, "Owner", ["Aperture", "Black Mesa"])
  var myChart = new dimple.chart(svg, extdata);
  if (opts.bounds) {
    myChart.setBounds(x = opts.bounds.x, y = opts.bounds.y, height = opts.bounds.height, width = opts.bounds.width);//myChart.setBounds(80, 30, 480, 330);
  }
  //dimple allows use of custom CSS with noFormats
  if(opts.noFormats) { myChart.noFormats = opts.noFormats; };
  //for markimekko and addAxis also have third parameter measure
  //so need to evaluate if measure provided
  //x axis
  var x;
  if(xAxis.measure) {
    x = myChart[xAxis.type]("x",opts.x,xAxis.measure);
  } else {
    x = myChart[xAxis.type]("x", opts.x);
  };
  if(!(xAxis.type === "addPctAxis")) x.showPercent = xAxis.showPercent;
  if (xAxis.orderRule) x.addOrderRule(xAxis.orderRule);
  if (xAxis.grouporderRule) x.addGroupOrderRule(xAxis.grouporderRule);  
  if (xAxis.overrideMin) x.overrideMin = xAxis.overrideMin;
  if (xAxis.overrideMax) x.overrideMax = xAxis.overrideMax;
  //y axis
  var y;
  if(yAxis.measure) {
    y = myChart[yAxis.type]("y",opts.y,yAxis.measure);
  } else {
    y = myChart[yAxis.type]("y", opts.y);
  };
  if(!(yAxis.type === "addPctAxis")) y.showPercent = yAxis.showPercent;
  if (yAxis.orderRule) y.addOrderRule(yAxis.orderRule);
  if (yAxis.grouporderRule) y.addGroupOrderRule(yAxis.grouporderRule);
  if (yAxis.overrideMin) y.overrideMin = yAxis.overrideMin;
  if (yAxis.overrideMax) y.overrideMax = yAxis.overrideMax;
  //z for bubbles
    var z;
  if (!(typeof(zAxis) === 'undefined') && zAxis.type){
    if(zAxis.measure) {
      z = myChart[zAxis.type]("z",opts.z,zAxis.measure);
    } else {
      z = myChart[zAxis.type]("z", opts.z);
    };
    if(!(zAxis.type === "addPctAxis")) z.showPercent = zAxis.showPercent;
    if (zAxis.orderRule) z.addOrderRule(zAxis.orderRule);
    if (zAxis.overrideMin) z.overrideMin = zAxis.overrideMin;
    if (zAxis.overrideMax) z.overrideMax = zAxis.overrideMax;
  }
  //here need think I need to evaluate group and if missing do null
  //as the first argument
  //if provided need to use groups from opts
  if(opts.hasOwnProperty("groups")) {
    var s = myChart.addSeries( opts.groups, dimple.plot[opts.type] );
    //series offers an aggregate method that we will also need to check if available
    //options available are avg, count, max, min, sum
    if (!(typeof(opts.aggregate) === 'undefined')) {
      s.aggregate = eval(opts.aggregate);
    }
    if (!(typeof(opts.lineWeight) === 'undefined')) {
      s.lineWeight = eval(opts.lineWeight);
    }
    if (!(typeof(opts.barGap) === 'undefined')) {
      s.barGap = eval(opts.barGap);
    }    
  } else var s = myChart.addSeries( null, dimple.plot[opts.type] );
  //unsure if this is best but if legend is provided (not empty) then evaluate
  if(d3.keys(legend).length > 0) {
    var l =myChart.addLegend();
    d3.keys(legend).forEach(function(d){
      l[d] = legend[d];
    });
  }
  //quick way to get this going but need to make this cleaner
  if(opts.storyboard) {
    myChart.setStoryboard(opts.storyboard);
  };
  myChart.draw();


  var opts = {
 "dom": "chart5",
"width":    800,
"height":    400,
"x": "maturity",
"y": "value",
"type": "line",
"storyboard": "date",
"id": "chart5" 
},
    data = [
 {
 "date": "01/31/2013",
"indexname": "DGS1",
"value":   0.15,
"maturity":      1,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS1",
"value":   0.16,
"maturity":      1,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS1",
"value":   0.14,
"maturity":      1,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS1",
"value":   0.11,
"maturity":      1,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS1",
"value":   0.14,
"maturity":      1,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS1",
"value":   0.17,
"maturity":      1,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS2",
"value":   0.27,
"maturity":      2,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS2",
"value":   0.25,
"maturity":      2,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS2",
"value":   0.23,
"maturity":      2,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS2",
"value":    0.2,
"maturity":      2,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS2",
"value":    0.3,
"maturity":      2,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS2",
"value":   0.43,
"maturity":      2,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS3",
"value":    0.4,
"maturity":      3,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS3",
"value":   0.35,
"maturity":      3,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS3",
"value":   0.36,
"maturity":      3,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS3",
"value":    0.3,
"maturity":      3,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS3",
"value":   0.52,
"maturity":      3,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS3",
"value":   0.74,
"maturity":      3,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS5",
"value":   0.88,
"maturity":      5,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS5",
"value":   0.75,
"maturity":      5,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS5",
"value":   0.76,
"maturity":      5,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS5",
"value":   0.65,
"maturity":      5,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS5",
"value":   1.05,
"maturity":      5,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS5",
"value":   1.49,
"maturity":      5,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS7",
"value":    1.4,
"maturity":      7,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS7",
"value":   1.23,
"maturity":      7,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS7",
"value":   1.23,
"maturity":      7,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS7",
"value":   1.07,
"maturity":      7,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS7",
"value":   1.55,
"maturity":      7,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS7",
"value":   2.03,
"maturity":      7,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS10",
"value":   2.04,
"maturity":     10,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS10",
"value":   1.86,
"maturity":     10,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS10",
"value":   1.86,
"maturity":     10,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS10",
"value":   1.66,
"maturity":     10,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS10",
"value":   2.16,
"maturity":     10,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS10",
"value":    2.6,
"maturity":     10,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS20",
"value":   2.83,
"maturity":     20,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS20",
"value":   2.68,
"maturity":     20,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS20",
"value":    2.7,
"maturity":     20,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS20",
"value":   2.44,
"maturity":     20,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS20",
"value":   2.95,
"maturity":     20,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS20",
"value":   3.31,
"maturity":     20,
"country": "US" 
},
{
 "date": "01/31/2013",
"indexname": "DGS30",
"value":   3.21,
"maturity":     30,
"country": "US" 
},
{
 "date": "02/28/2013",
"indexname": "DGS30",
"value":   3.06,
"maturity":     30,
"country": "US" 
},
{
 "date": "03/31/2013",
"indexname": "DGS30",
"value":   3.08,
"maturity":     30,
"country": "US" 
},
{
 "date": "04/30/2013",
"indexname": "DGS30",
"value":   2.83,
"maturity":     30,
"country": "US" 
},
{
 "date": "05/30/2013",
"indexname": "DGS30",
"value":    3.3,
"maturity":     30,
"country": "US" 
},
{
 "date": "06/24/2013",
"indexname": "DGS30",
"value":    3.6,
"maturity":     30,
"country": "US" 
} 
],
    xAxis = {
 "type": "addCategoryAxis",
"showPercent": false,
"orderRule": "maturity" 
},
    yAxis = {
 "type": "addMeasureAxis",
"showPercent": false 
},
    zAxis = [],
    legend = [];
  var svg = dimple.newSvg("#" + opts.id, opts.width, opts.height);

  //data = dimple.filterData(data, "Owner", ["Aperture", "Black Mesa"])
  var myChart = new dimple.chart(svg, data);
  if (opts.bounds) {
    myChart.setBounds(x = opts.bounds.x, y = opts.bounds.y, height = opts.bounds.height, width = opts.bounds.width);//myChart.setBounds(80, 30, 480, 330);
  }
  //dimple allows use of custom CSS with noFormats
  if(opts.noFormats) { myChart.noFormats = opts.noFormats; };
  //for markimekko and addAxis also have third parameter measure
  //so need to evaluate if measure provided
  //x axis
  var x;
  if(xAxis.measure) {
    x = myChart[xAxis.type]("x",opts.x,xAxis.measure);
  } else {
    x = myChart[xAxis.type]("x", opts.x);
  };
  if(!(xAxis.type === "addPctAxis")) x.showPercent = xAxis.showPercent;
  if (xAxis.orderRule) x.addOrderRule(xAxis.orderRule);
  if (xAxis.grouporderRule) x.addGroupOrderRule(xAxis.grouporderRule);  
  if (xAxis.overrideMin) x.overrideMin = xAxis.overrideMin;
  if (xAxis.overrideMax) x.overrideMax = xAxis.overrideMax;
  //y axis
  var y;
  if(yAxis.measure) {
    y = myChart[yAxis.type]("y",opts.y,yAxis.measure);
  } else {
    y = myChart[yAxis.type]("y", opts.y);
  };
  if(!(yAxis.type === "addPctAxis")) y.showPercent = yAxis.showPercent;
  if (yAxis.orderRule) y.addOrderRule(yAxis.orderRule);
  if (yAxis.grouporderRule) y.addGroupOrderRule(yAxis.grouporderRule);
  if (yAxis.overrideMin) y.overrideMin = yAxis.overrideMin;
  if (yAxis.overrideMax) y.overrideMax = yAxis.overrideMax;
  //z for bubbles
    var z;
  if (!(typeof(zAxis) === 'undefined') && zAxis.type){
    if(zAxis.measure) {
      z = myChart[zAxis.type]("z",opts.z,zAxis.measure);
    } else {
      z = myChart[zAxis.type]("z", opts.z);
    };
    if(!(zAxis.type === "addPctAxis")) z.showPercent = zAxis.showPercent;
    if (zAxis.orderRule) z.addOrderRule(zAxis.orderRule);
    if (zAxis.overrideMin) z.overrideMin = zAxis.overrideMin;
    if (zAxis.overrideMax) z.overrideMax = zAxis.overrideMax;
  }
  //here need think I need to evaluate group and if missing do null
  //as the first argument
  //if provided need to use groups from opts
  if(opts.hasOwnProperty("groups")) {
    var s = myChart.addSeries( opts.groups, dimple.plot[opts.type] );
    //series offers an aggregate method that we will also need to check if available
    //options available are avg, count, max, min, sum
    if (!(typeof(opts.aggregate) === 'undefined')) {
      s.aggregate = eval(opts.aggregate);
    }
    if (!(typeof(opts.lineWeight) === 'undefined')) {
      s.lineWeight = eval(opts.lineWeight);
    }
    if (!(typeof(opts.barGap) === 'undefined')) {
      s.barGap = eval(opts.barGap);
    }    
  } else var s = myChart.addSeries( null, dimple.plot[opts.type] );
  //unsure if this is best but if legend is provided (not empty) then evaluate
  if(d3.keys(legend).length > 0) {
    var l =myChart.addLegend();
    d3.keys(legend).forEach(function(d){
      l[d] = legend[d];
    });
  }
  //quick way to get this going but need to make this cleaner
  if(opts.storyboard) {
    myChart.setStoryboard(opts.storyboard);
  };
  myChart.draw();

};

</script>  
  
  
</body>
  <script src="libraries/frameworks/bootplus/assets/js/bootstrap.min.js"></script>
  <script src="libraries/frameworks/bootplus/assets/js/application.js"></script>
  
  <!-- Google Prettify -->
  <script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
  <script src='libraries/highlighters/prettify/js/lang-r.js'></script>
  <script>
    var pres = document.getElementsByTagName("pre");
    for (var i=0; i < pres.length; ++i) {
      pres[i].className = "prettyprint linenums";
    }
    prettyPrint();
  </script>
  <!-- End Google Prettify --> 
  </html>